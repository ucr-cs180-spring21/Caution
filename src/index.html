<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="styling/style.css">
	</head>
	<body>
		<h1>Caution!</h1>	 
		<div>
			<select multiple="multiple" class="multi-select">
				<option value="" disabled selected>Select filters</option>
				<option id="year" value="year">year</option>
				<option id="month"value="month">month</option>
				<option id="day" value="day">day</option>
				<option id="startTime" value="startTime">startTime</option>
				<option id="endTime" value="endTime">endTime</option>
				<option id="state" value="state">state</option>
				<option id="county" value="county">county</option>
				<option id="zipcode" value="zipcode">zipcode</option>
				<option id="street" value="street">street</option>
				<option id="number" value="number">number</option>
				<option id="startLat" value="startLat">startLat</option>
				<option id="endLat" value="endLat">endLat</option>
				<option id="startLong" value="startLong">startLong</option>
				<option id="endLong" value="endLong">endLong</option>
				<option id="severity" value="severity">severity</option>
				<option id="bump" value="bump">bump</option>
				<option id="stop" value="stop">stop</option>
				<option id="signal" value="signal">signal</option>
				<option id="weather" value="weather">weather</option>
				<option id="humidity" value="humidity">humidity</option>
			</select>
		</div>
		<div>
			<textarea class="text-area">Queued data will be displayed here</textarea>
		</div>
		<div class="button">
			<button type="button" onclick="">Update</button>
			<button type="button" onclick="">Export</button>
		</div>

		<p id="hellow"></p>
		<button onclick="buttonClickedhello()">Hello!</button>

		<button onclick="buttonweather()">Weather: Light Rain</button>
		<button onclick="buttonhumid()">Humidity: 100%</button>
		<button onclick="buttonbump()">Bump: True</button>
		<button onclick="buttonseverity()">Severity: 3/3</button>
		<button onclick="buttontimezone()">Timezone: US/Eastern</button>
		<button onclick="buttoncity()">City: Dayton</button>
		<button onclick="buttonairport()">Airport Code: KDAY</button>
		<button onclick="buttonpressure()">Pressure(in): 29.61</button>
		<button onclick="buttonclear()">Clear Table</button>

		<table class="table" id="infotable"></table>

		<script src="front_end/multiselect.js"></script> 
		<script src="/socket.io/socket.io.js"></script>
		<script>
			var socket = io.connect();
        
            // When button is clickeds
		    function buttonClickedhello(){
			    socket.emit('hello');
			}
			function buttonbump(){
			    socket.emit('bump');
			}
			function buttonweather(){
			    socket.emit('rain');
			}
			function buttonhumid(){
			    socket.emit('humid');
			}
			function buttonseverity(){
			    socket.emit('severity');
			}
			function buttontimezone(){
			    socket.emit('timezone');
			}
			function buttoncity(){
			    socket.emit('city');
			}
			function buttonairport(){
			    socket.emit('airport');
			}
			function buttonpressure(){
			    socket.emit('pressure');
			}
			function buttonclear(){
			    socket.emit('clear');
			}
			 
			 // When the server sends, update the HTML
			socket.on('hello world', function(data){
                console.log("Hello World!");
				document.getElementById("hellow").innerHTML = 'Hello World!';
			});
			socket.on('empty', function(data){
                var table = '<table>';
				table += '<tr>';
				testarr = ['ID', 'Source', 'TMC', 'Severity', 'Start_Time', 'End_Time', 'Start_Lat', 'Start_Lng', 'End_Lat', 
				'End_Lng', 'Distance(mi)', 'Description', 'Number', 'Street', 'Side', 'City', 'County', 'State', 'Zipcode', 'Country', 
				'Timezone', 'Airport_Code', 'Weather_Timestamp', 'Temperature(F)', 'Wind_Chill(F)', 'Humidity(%)', 'Pressure(in)', 'Visibility(mi)',
				'Wind_Direction', 'Wind_Speed(mph)', 'Precipitation(in)', 'Weather_Condition', 'Amenity', 'Bump', 'Crossing', 'Give_Way', 'Junction',
				'No_Exit', 'Railway', 'Roundabout', 'Station', 'Stop', 'Traffic_Calming', 'Traffic_Signal', 'Turning_Loop', 'Sunrise_Sunset', 'Civil_Twilight',
				'Nautical_Twilight', 'Astronomical_Twilight']
				
				for(var i in data[0]) {
					table += '<th>' + i + '</th>';
					console.log(i);
				}

				table += '</tr>';
				for(var j = 0; j < data.length; j++){
					table += '<tr>';
					for(var k in data[j]){
					table += '<td>' + data[j][k] + '</td>';
					}
					table += '</tr>';
				}
				table += '</table>';
				document.getElementById('infotable').innerHTML = table;
			});
			socket.on('senddata', function(data){
                console.log("Received Data");
				//method learned from: https://stackoverflow.com/questions/44127872/convert-array-of-objects-into-html-table-with-jquery-or-javascript
				var table = '<table>';
				table += '<tr>';
				testarr = ['ID', 'Source', 'TMC', 'Severity', 'Start_Time', 'End_Time', 'Start_Lat', 'Start_Lng', 'End_Lat', 
				'End_Lng', 'Distance(mi)', 'Description', 'Number', 'Street', 'Side', 'City', 'County', 'State', 'Zipcode', 'Country', 
				'Timezone', 'Airport_Code', 'Weather_Timestamp', 'Temperature(F)', 'Wind_Chill(F)', 'Humidity(%)', 'Pressure(in)', 'Visibility(mi)',
				'Wind_Direction', 'Wind_Speed(mph)', 'Precipitation(in)', 'Weather_Condition', 'Amenity', 'Bump', 'Crossing', 'Give_Way', 'Junction',
				'No_Exit', 'Railway', 'Roundabout', 'Station', 'Stop', 'Traffic_Calming', 'Traffic_Signal', 'Turning_Loop', 'Sunrise_Sunset', 'Civil_Twilight',
				'Nautical_Twilight', 'Astronomical_Twilight']
				
				// for(var i in data[0]) {
				// 	table += '<th>' + i + '</th>';
				// 	console.log(i);
				// }

				for(var i in testarr) {
					table += '<th>' + testarr[i] + '</th>';
					console.log(i);
				}

				table += '</tr>';
				for(var j = 0; j < data.length; j++){
					table += '<tr>';
					for(var k in data[j]){
					table += '<td>' + data[j][k] + '</td>';
					}
					table += '</tr>';
				}
				table += '</table>';
				document.getElementById('infotable').innerHTML = table;
			});
		</script>
	</body>
</html>
